{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { showLoading } from '../main';\nexport async function connectionFrom(word,currentPage) {\n  const params = new URLSearchParams({\n    key: '43271859-59a58ad2885d01442ce560ecb',\n    q: word,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: `15`,\n  });\n\n  showLoading();\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(response.status);\n  }\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { elem,hideLoading, lightbox, displayToast, hideButton } from \"../main\";\n\nexport async function render(data) {\n  if (data.hits.length === 0) {\n    hideLoading(); \n    displayToast(\"Sorry, there are no images matching your search query. Please try again!\");\n      hideButton();\n  }\n  else {\n    const images = data.hits;\n\n    const markup = images.map(image => `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                  <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <div class=\"stats\">\n                  <p class=\"text\">Likes<br/>${image.likes}</p>\n                  <p class=\"text\">Views<br/>${image.views}</p>\n                  <p class=\"text\">Comments<br/>${image.comments}</p>\n                  <p class=\"text\">Downloads<br/>${image.downloads}</p>\n                </div>\n              </li>`)\n      .join('');\n    elem.gallery.insertAdjacentHTML('beforeend', markup);\n \n    lightbox.refresh();\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { connectionFrom} from \"./js/pixabay-api\";\nimport { render } from \"./js/render-functions\";\n\n\nexport const elem = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  wordInput: document.querySelector('.input'),\n  loader: document.querySelector('.loader'),\n  addButton: document.querySelector(`.button`)\n};\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n  overlay: true,\n  overlayOpacity: 0.7,\n});\n\nconst perPage = 15;\n\nexport let word = '';\n\nexport let currentPage=1;\n\nelem.form.addEventListener(\"submit\", submitImageFinder);\nelem.addButton.addEventListener('click', moreImages);\n\nhideButton();\nhideLoading();\nasync function submitImageFinder(event){\n  event.preventDefault();\n  \n  showLoading();\n  \n  \n  elem.gallery.innerHTML = '';\n  \n  word = elem.wordInput.value.trim();\n\n  if (word !== '') {\n    await connectionFrom(word, currentPage)\n      .then(data => {\n        render(data);\n        hideLoading();\n        showButton();\n      })\n      .catch(error => console.log(error));\n  }\n  else {\n    displayToast(\"Please complete the field!\")\n    hideLoading();\n    hideButton();\n  }\n  \n  elem.form.reset();\n  \n    const inputHeight = elem.wordInput.getBoundingClientRect();\n    window.scrollBy({\n      top: inputHeight.height * 2 + 48,\n      behavior: 'smooth',\n    });\n};\n\nasync function moreImages(event) {\n  \n  event.preventDefault();\n  \n  hideButton();\n  showLoading();\n\n  currentPage += 1;\n  \n  const images = await connectionFrom(word, currentPage);\n  if (currentPage >= Math.ceil(images.totalHits / perPage)) {\n    displayToast(\"We're sorry, but you've reached the end of search results.\")\n    hideLoading();\n    hideButton();\n  }\n  else {\n    render(images);\n    hideLoading();\n    showButton();\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight.height * 2 + 48,\n      behavior: 'smooth',\n    });\n  }\n}\n\nexport function displayToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoading() {\n  elem.loader.style.display = 'block';\n}\n\nexport function hideLoading() {\n  elem.loader.style.display = 'none';\n}\n\nexport function showButton() {\n  elem.addButton.style.display = 'block';\n}\n\nexport function hideButton() {\n  elem.addButton.style.display = 'none';\n}"],"names":["connectionFrom","word","currentPage","params","showLoading","axios","render","data","hideLoading","displayToast","hideButton","markup","image","elem","lightbox","SimpleLightbox","perPage","submitImageFinder","moreImages","event","showButton","error","inputHeight","images","cardHeight","message","iziToast"],"mappings":"owBAEO,eAAeA,EAAeC,EAAKC,EAAa,CACrD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,IACd,CAAG,EAEDE,IAEA,GAAI,CAEF,OADiB,MAAMC,EAAM,IAAI,4BAA4BF,CAAM,EAAE,GACrD,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,SAAS,MAAM,CAChC,CACH,CCbO,eAAeG,EAAOC,EAAM,CACjC,GAAIA,EAAK,KAAK,SAAW,EACvBC,IACAC,EAAa,0EAA0E,EACrFC,QAEC,CAGH,MAAMC,EAFSJ,EAAK,KAEE,IAAIK,GAAS;AAAA,gDACSA,EAAM,aAAa;AAAA,oDACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,8CAG5CA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA,oBAE7C,EACb,KAAK,EAAE,EACVC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EAEnDG,EAAS,QAAO,CACjB,CACH,CCvBO,MAAMD,EAAO,CAClB,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,QAAQ,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,UAAW,SAAS,cAAc,SAAS,CAC7C,EAEaC,EAAW,IAAIC,EAAe,gBAAiB,CAC1D,aAAc,MACd,aAAc,IACd,QAAS,GACT,eAAgB,EAClB,CAAC,EAEKC,EAAU,GAET,IAAIf,EAAO,GAEPC,EAAY,EAEvBW,EAAK,KAAK,iBAAiB,SAAUI,CAAiB,EACtDJ,EAAK,UAAU,iBAAiB,QAASK,CAAU,EAEnDR,IACAF,IACA,eAAeS,EAAkBE,EAAM,CACrCA,EAAM,eAAc,EAEpBf,IAGAS,EAAK,QAAQ,UAAY,GAEzBZ,EAAOY,EAAK,UAAU,MAAM,KAAI,EAE5BZ,IAAS,GACX,MAAMD,EAAeC,EAAMC,CAAW,EACnC,KAAKK,GAAQ,CACZD,EAAOC,CAAI,EACXC,IACAY,GACR,CAAO,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,GAGpCZ,EAAa,4BAA4B,EACzCD,IACAE,KAGFG,EAAK,KAAK,QAER,MAAMS,EAAcT,EAAK,UAAU,sBAAqB,EACxD,OAAO,SAAS,CACd,IAAKS,EAAY,OAAS,EAAI,GAC9B,SAAU,QAChB,CAAK,CACL,CAEA,eAAeJ,EAAWC,EAAO,CAE/BA,EAAM,eAAc,EAEpBT,IACAN,IAEAF,GAAe,EAEf,MAAMqB,EAAS,MAAMvB,EAAeC,EAAMC,CAAW,EACrD,GAAIA,GAAe,KAAK,KAAKqB,EAAO,UAAYP,CAAO,EACrDP,EAAa,4DAA4D,EACzED,IACAE,QAEG,CACHJ,EAAOiB,CAAM,EACbf,IACAY,IAEA,MAAMI,EADO,SAAS,cAAc,eAAe,EAC3B,wBACxB,OAAO,SAAS,CACd,IAAKA,EAAW,OAAS,EAAI,GAC7B,SAAU,QAChB,CAAK,CACF,CACH,CAEO,SAASf,EAAagB,EAAS,CACpCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEO,SAASrB,GAAc,CAC5BS,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEO,SAASL,GAAc,CAC5BK,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEO,SAASO,GAAa,CAC3BP,EAAK,UAAU,MAAM,QAAU,OACjC,CAEO,SAASH,GAAa,CAC3BG,EAAK,UAAU,MAAM,QAAU,MACjC"}